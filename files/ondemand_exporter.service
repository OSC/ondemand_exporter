[Unit]
Description=OnDemand Prometheus Exporter
Wants=basic.target
After=basic.target network.target

[Service]
User=ondemand_exporter
Group=ondemand_exporter
SyslogIdentifier=ondemand_exporter
Environment="PORT=9301"
Environment="APACHE_PORT=81"
ExecStart=/usr/bin/ondemand_exporter \
--web.listen-address=:${PORT} \
--collector.apache.status-url=http://localhost:${APACHE_PORT}/server-status
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=always

[Install]
WantedBy=multi-user.target
